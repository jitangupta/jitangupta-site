---
import Layout from '../layouts/Layout.astro';
const title = "ðŸš€ Get a Free Enterprise Migration Strategy Call | Jitan Gupta";
const description = "Struggling with legacy systems? Book a free strategy call with Jitan Gupta and get expert guidance on migrating to scalable, cloud-native architectures.";


---
<Layout	title={title} description={description}>
	<section class="bg-gray-100 mx-2">
		<div class="bg-white max-w-screen-xl mx-auto px-5 py-5 md:px-15 md:py-10 rounded-b-2xl">
            <!-- Title -->
            <h1 class="text-3xl md:text-5xl lg:text-6xl mt-5 md:mt-8 mb-2 font-bold" style="line-height: 0.8;">Future-Proof Your Business <br> <span class="text-3xl">with a Cloud-Native Migration Strategy</span></h1>
        
            <p class="text-gray-700">Migrate outdated systems seamlessly. Reduce costs, boost performance, and enhance securityâ€”without the headaches.</p>

            <form class="max-w-lg mx-auto p-6 bg-white shadow-lg rounded-lg" onsubmit="handleSubmit(event)">
                <h2 class="text-xl font-bold mb-4">Book a Free Consultation</h2>
              
                <label class="block mb-2">Full Name</label>
                <input type="text" name="fullName" required class="w-full p-2 border rounded mb-4" />
              
                <label class="block mb-2">Business Email</label>
                <input type="email" name="email" required class="w-full p-2 border rounded mb-4" />
              
                <label class="block mb-2">Company Name</label>
                <input type="text" name="companyName" required class="w-full p-2 border rounded mb-4" />
              
                <label class="block mb-2">Your Role</label>
                <select name="role" required class="w-full p-2 border rounded mb-4">
                  <option>CEO</option>
                  <option>CTO</option>
                  <option>IT Manager</option>
                  <option>Architect</option>
                  <option>Developer</option>
                  <option>Other</option>
                </select>
              
                <label class="block mb-2">Current Challenges</label>
                <textarea name="challenges" required class="w-full p-2 border rounded mb-4"></textarea>
              
                <label class="block mb-2">Preferred Time for Call</label>
                <select id="preferredTime" name="preferredTime" required class="w-full p-2 border rounded mb-4"></select>
              
                <button type="submit" class="w-full bg-blue-500 text-white p-2 rounded">Get My Free Strategy Call</button>
              </form>
        </div>
	</section>
</Layout>

<script>
    async function fetchAvailableSlots() {
      const response = await fetch('https://api.calendly.com/scheduled_events', {
        headers: { Authorization: `Bearer YOUR_CALENDLY_API_KEY` }
      });
      const data = await response.json();
      return data.collection || [];
    }
    
    document.addEventListener("DOMContentLoaded", async () => {
      const slots = await fetchAvailableSlots();
      const selectElement = document.getElementById("preferredTime");
      slots.forEach(slot => {
        const option = document.createElement("option");
        option.value = slot.start_time;
        option.textContent = new Date(slot.start_time).toLocaleString();
        selectElement.appendChild(option);
      });
    });
    
    async function handleSubmit(event) {
      event.preventDefault();
      const formData = new FormData(event.target);
      const payload = Object.fromEntries(formData);
    
      // Send data to your backend
      await fetch('https://api.jitangupta.com/consult', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });
    
      // Book the slot in Calendly
      await fetch('https://api.calendly.com/scheduled_events', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json', Authorization: `Bearer YOUR_CALENDLY_API_KEY` },
        body: JSON.stringify({ ...payload, event_type: 'your_event_type_id' })
      });
    }
</script>