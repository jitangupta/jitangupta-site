<svg width="1100" height="480" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1100 480">
  <defs>
    <!-- Gradient definitions -->
    <linearGradient id="yarpGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#374151" stop-opacity="1" />
      <stop offset="100%" stop-color="#1F2937" stop-opacity="1" />
    </linearGradient>
    
    <!-- Arrow markers -->
    <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#10B981" />
    </marker>
    <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#3B82F6" />
    </marker>
    <marker id="arrowPurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#A855F7" />
    </marker>
    <marker id="arrowPink" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#EC4899" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1100" height="480" fill="#1e1e1e" />
  
  <!-- Title -->
  <text x="550" y="35" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#FFFFFF" text-anchor="middle">
    YARP Intelligent Routing: Tenant-to-Version Mapping
  </text>
  
  <!-- Left side: API Endpoints -->
  <text x="30" y="85" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#9CA3AF">
    API Endpoints
  </text>
  
  <!-- Endpoint 1: Tenant API -->
  <rect x="30" y="105" width="280" height="55" rx="6" fill="#065F46" stroke="#10B981" stroke-width="2"/>
  <text x="170" y="127" font-family="Consolas, monospace" font-size="12" fill="#10B981" text-anchor="middle" font-weight="bold">
    api.demodeck.xyz/tenant/*
  </text>
  <text x="170" y="147" font-family="Arial, sans-serif" font-size="11" fill="#D1FAE5" text-anchor="middle">
    Tenant management endpoints
  </text>
  
  <!-- Endpoint 2: Auth API -->
  <rect x="30" y="180" width="280" height="55" rx="6" fill="#1E3A8A" stroke="#3B82F6" stroke-width="2"/>
  <text x="170" y="202" font-family="Consolas, monospace" font-size="12" fill="#3B82F6" text-anchor="middle" font-weight="bold">
    api.demodeck.xyz/auth/*
  </text>
  <text x="170" y="222" font-family="Arial, sans-serif" font-size="11" fill="#DBEAFE" text-anchor="middle">
    Authentication &amp; authorization
  </text>
  
  <!-- Endpoint 3: Product API -->
  <rect x="30" y="255" width="280" height="55" rx="6" fill="#581C87" stroke="#A855F7" stroke-width="2"/>
  <text x="170" y="277" font-family="Consolas, monospace" font-size="12" fill="#A855F7" text-anchor="middle" font-weight="bold">
    api.demodeck.xyz/product/*
  </text>
  <text x="170" y="297" font-family="Arial, sans-serif" font-size="11" fill="#F3E8FF" text-anchor="middle">
    Product &amp; contract services
  </text>
  
  <!-- Endpoint 4: Cloud API -->
  <rect x="30" y="330" width="280" height="55" rx="6" fill="#831843" stroke="#EC4899" stroke-width="2"/>
  <text x="170" y="352" font-family="Consolas, monospace" font-size="12" fill="#EC4899" text-anchor="middle" font-weight="bold">
    api.demodeck.xyz/cloud/*
  </text>
  <text x="170" y="372" font-family="Arial, sans-serif" font-size="11" fill="#FCE7F3" text-anchor="middle">
    Cloud storage &amp; document services
  </text>
  
  <!-- Center: YARP Router -->
  <rect x="400" y="145" width="280" height="165" rx="8" fill="url(#yarpGradient)" stroke="#6B7280" stroke-width="3"/>
  <text x="540" y="175" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#FFFFFF" text-anchor="middle">
    YARP
  </text>
  <text x="540" y="195" font-family="Arial, sans-serif" font-size="12" fill="#D1D5DB" text-anchor="middle">
    Yet Another Reverse Proxy
  </text>
  
  <!-- YARP routing logic -->
  <rect x="420" y="210" width="240" height="85" rx="4" fill="#374151" stroke="#4B5563" stroke-width="1"/>
  <text x="540" y="228" font-family="Arial, sans-serif" font-size="11" fill="#9CA3AF" text-anchor="middle">
    Routing Logic:
  </text>
  <text x="430" y="246" font-family="Consolas, monospace" font-size="10" fill="#F59E0B">
    1. Extract tenant from subdomain
  </text>
  <text x="430" y="262" font-family="Consolas, monospace" font-size="10" fill="#10B981">
    2. Lookup version from database
  </text>
  <text x="430" y="278" font-family="Consolas, monospace" font-size="10" fill="#3B82F6">
    3. Cache version in memory
  </text>
  <text x="430" y="294" font-family="Consolas, monospace" font-size="10" fill="#A855F7">
    4. Route to version-specific service
  </text>
  
  <!-- Right side: Version-specific Services -->
  <text x="790" y="85" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#9CA3AF">
    Version-Specific Services
  </text>
  
  <!-- Service 1: Tenant API versions -->
  <rect x="790" y="105" width="280" height="55" rx="6" fill="#064E3B" stroke="#10B981" stroke-width="2"/>
  <text x="930" y="122" font-family="Consolas, monospace" font-size="11" fill="#10B981" text-anchor="middle" font-weight="bold">
    tenant-api-&lt;version&gt;-service
  </text>
  <text x="930" y="138" font-family="Arial, sans-serif" font-size="10" fill="#A7F3D0" text-anchor="middle">
    shared-services.svc.cluster.local:80
  </text>
  <text x="930" y="152" font-family="Arial, sans-serif" font-size="9" fill="#6EE7B7" text-anchor="middle">
    v3.0, v3.1, v3.2 pods running
  </text>
  
  <!-- Service 2: Auth API versions -->
  <rect x="790" y="180" width="280" height="55" rx="6" fill="#1E3A8A" stroke="#3B82F6" stroke-width="2"/>
  <text x="930" y="197" font-family="Consolas, monospace" font-size="11" fill="#3B82F6" text-anchor="middle" font-weight="bold">
    auth-api-&lt;version&gt;-service
  </text>
  <text x="930" y="213" font-family="Arial, sans-serif" font-size="10" fill="#BFDBFE" text-anchor="middle">
    shared-services.svc.cluster.local:80
  </text>
  <text x="930" y="227" font-family="Arial, sans-serif" font-size="9" fill="#93C5FD" text-anchor="middle">
    v3.0, v3.1, v3.2 pods running
  </text>
  
  <!-- Service 3: Product API versions -->
  <rect x="790" y="255" width="280" height="55" rx="6" fill="#581C87" stroke="#A855F7" stroke-width="2"/>
  <text x="930" y="272" font-family="Consolas, monospace" font-size="11" fill="#A855F7" text-anchor="middle" font-weight="bold">
    product-api-&lt;version&gt;-service
  </text>
  <text x="930" y="288" font-family="Arial, sans-serif" font-size="10" fill="#E9D5FF" text-anchor="middle">
    shared-services.svc.cluster.local:80
  </text>
  <text x="930" y="302" font-family="Arial, sans-serif" font-size="9" fill="#D8B4FE" text-anchor="middle">
    v3.0, v3.1, v3.2 pods running
  </text>
  
  <!-- Service 4: Cloud API versions -->
  <rect x="790" y="330" width="280" height="55" rx="6" fill="#831843" stroke="#EC4899" stroke-width="2"/>
  <text x="930" y="347" font-family="Consolas, monospace" font-size="11" fill="#EC4899" text-anchor="middle" font-weight="bold">
    cloud-api-&lt;version&gt;-service
  </text>
  <text x="930" y="363" font-family="Arial, sans-serif" font-size="10" fill="#FCE7F3" text-anchor="middle">
    shared-services.svc.cluster.local:80
  </text>
  <text x="930" y="377" font-family="Arial, sans-serif" font-size="9" fill="#FBCFE8" text-anchor="middle">
    v3.0, v3.1, v3.2 pods running
  </text>
  
  <!-- Routing arrows from API endpoints to YARP -->
  <path d="M 310 132 L 400 190" stroke="#10B981" stroke-width="2.5" fill="none" marker-end="url(#arrowGreen)"/>
  <path d="M 310 207 L 400 215" stroke="#3B82F6" stroke-width="2.5" fill="none" marker-end="url(#arrowBlue)"/>
  <path d="M 310 282 L 400 240" stroke="#A855F7" stroke-width="2.5" fill="none" marker-end="url(#arrowPurple)"/>
  <path d="M 310 357 L 400 265" stroke="#EC4899" stroke-width="2.5" fill="none" marker-end="url(#arrowPink)"/>
  
  <!-- Routing arrows from YARP to version-specific services -->
  <path d="M 680 190 L 790 132" stroke="#10B981" stroke-width="2.5" fill="none" marker-end="url(#arrowGreen)"/>
  <path d="M 680 215 L 790 207" stroke="#3B82F6" stroke-width="2.5" fill="none" marker-end="url(#arrowBlue)"/>
  <path d="M 680 240 L 790 282" stroke="#A855F7" stroke-width="2.5" fill="none" marker-end="url(#arrowPurple)"/>
  <path d="M 680 265 L 790 357" stroke="#EC4899" stroke-width="2.5" fill="none" marker-end="url(#arrowPink)"/>
  
  <!-- Example tenant routing annotation -->
  <rect x="350" y="405" width="400" height="60" rx="6" fill="#1F2937" stroke="#4B5563" stroke-width="1.5"/>
  <text x="550" y="425" font-family="Arial, sans-serif" font-size="12" fill="#F59E0B" text-anchor="middle" font-weight="bold">
    Example: acme.demodeck.xyz/api/products
  </text>
  <text x="550" y="442" font-family="Consolas, monospace" font-size="10" fill="#D1D5DB" text-anchor="middle">
    Tenant: acme → Version: 3.2 → Routes to: product-api-v3-2-service:80
  </text>
  <text x="550" y="457" font-family="Arial, sans-serif" font-size="9" fill="#9CA3AF" text-anchor="middle">
    All routing decisions happen in YARP based on cached tenant version from database
  </text>
</svg>
